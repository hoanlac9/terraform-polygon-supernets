global:
  scrape_interval: 15s

scrape_configs:
  - job_name: prometheus
    scrape_interval: 30s
    static_configs:
    - targets: ["localhost:9090"]

  - job_name: node-exporter
    scrape_interval: 30s
    static_configs:
{% for item in groups['k1dev_edge_karrierone_private'] %}
    - targets: ["{{ hostvars[item].private_ip_address }}:9100"]
      labels:
        instance: "{{ hostvars[item].tags.Name }}"
{% endfor %}

  - job_name: cadvisor
    scrape_interval: 30s
    static_configs:
{% for item in groups['k1dev_edge_karrierone_private'] %}
    - targets: ["{{ hostvars[item].private_ip_address }}:9101"]
      labels:
        instance: "{{ hostvars[item].tags.Name }}"
{% endfor %}


rule_files:
  - prometheus_alerts_rules.yml

# alerting:
#   alertmanagers:
#     - static_configs:
#       - targets:
#         - 192.168.0.1:9093
